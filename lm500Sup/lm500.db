record(ai, "$(P)ALARM:RB") {
    field(DESC, "Alarm Threshold")
    field(DTYP, "stream")
    field(SCAN, "1 second")
    field(INP,  "@lm500.proto getALARM() $(PORT)")
}

record(mbbi, "$(P)BOOST:RB") {
    field(DESC, "Boost mode")
    field(ZRST, "Off")
    field(ONST, "On")
    field(TWST, "Smart")
    field(DTYP, "stream")
    field(SCAN, "1 second")
    field(INP,  "@lm500.proto getBOOST() $(PORT)")
}

record(mbbo, "$(P)BOOST:SP") {
    field(DESC, "Boost mode Setpoint")
    field(ZRST, "Off")
    field(ONST, "On")
    field(TWST, "Smart")
    field(DTYP, "stream")
    field(OUT,  "@lm500.proto setBOOST $(PORT)")
}

record(mbbi, "$(P)OUTPUT:RB") {
    field(DESC, "Output Channel")
    field(DTYP, "stream")
    field(SCAN, "1 second")
    field(ZRVL, "0")
    field(ONVL, "1")
    field(TWVL, "2")
    field(ZRST, "Remote Select")
    field(ONST, "Channel 1")
    field(TWST, "Channel 2")
    field(INP,  "@lm500.proto getOUT() $(PORT)")
}
record(mbbo, "$(P)OUTPUT:SP") {
    field(DESC, "Output Channel")
    field(DTYP, "stream")
    field(ZRVL, "0")
    field(ONVL, "1")
    field(TWVL, "2")
    field(ZRST, "Remote Select")
    field(ONST, "Channel 1")
    field(TWST, "Channel 2")
    field(OUT, "@lm500.proto setOUT $(PORT)")
}

record(mbbi, "$(P)TYPE:RB") {
    field(DESC, "Default Channel's Type")
    field(DTYP, "stream")
    field(ZRVL, "0")
    field(ONVL, "1")
    field(ZRST, "Helium")
    field(ONST, "Nitrogen")
    field(SCAN, "1 second")
    field(INP,  "@lm500.proto getTYPE() $(PORT)")
}

record(mbbi, "$(P)TYPE:CHAN1:RB") {
    field(DESC, "Channel 1's Type")
    field(DTYP, "stream")
    field(ZRVL, "0")
    field(ONVL, "1")
    field(ZRST, "Helium")
    field(ONST, "Nitrogen")
    field(SCAN, "1 second")
    field(INP,  "@lm500.proto getTYPECHAN(1) $(PORT)")
}

record(mbbi, "$(P)TYPE:CHAN2:RB") {
    field(DESC, "Channel 2's Type")
    field(DTYP, "stream")
    field(ZRVL, "0")
    field(ONVL, "1")
    field(ZRST, "Helium")
    field(ONST, "Nitrogen")
    field(SCAN, "1 second")
    field(INP,  "@lm500.proto getTYPECHAN(2) $(PORT)")
}
record(mbbi, "$(P)CHANNEL:RB") {
    field(DESC, "Default Channel")
    field(DTYP, "stream")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRST, "Channel 1")
    field(ONST, "Channel 2")
    field(SCAN, "1 second")
    field(INP,  "@lm500.proto getCHAN() $(PORT)")
}

record(mbbo, "$(P)CHANNEL:SP") {
    field(DESC, "Set Default Channel")
    field(DTYP, "stream")
    field(ZRVL, "1")
    field(ONVL, "2")
    field(ZRST, "Channel 1")
    field(ONST, "Channel 2")
    field(OUT, "@lm500.proto setCHAN $(PORT)")
}

record(mbbi, "$(P)ERROR:RB") {
    field(DESC, "Error Mode")
    field(DTYP, "stream")
    field(SCAN, "1 second")
    field(ZRVL, "0")
    field(ONVL, "1")
    field(ZRST, "Reporting Disabled")
    field(ONST, "Reporting Enabled")
    field(INP,  "@lm500.proto getERR() $(PORT)")
}

record(mbbo, "$(P)ERROR:SP") {
    field(DESC, "Set Default Channel")
    field(DTYP, "stream")
    field(ZRVL, "0")
    field(ONVL, "1")
    field(ZRST, "Disable")
    field(ONST, "Enable")
    field(OUT, "@lm500.proto setERR $(PORT)")
}

record(bo, "$(P)FILL") {
    field(DESC, "Start Fil")
    field(DTYP, "stream")
    field(VAL,  "0")
    field(ONAM, "Starting Fill") 
    field(HIGH, "1")
    field(OUT,  "@lm500.proto FILL $(PORT)")
}

record(ai, "$(P)FILL:TIME") {
    field(DESC, "default channel Fill time")
    field(DTYP, "stream")
    field(EGU, "min")
    field(SCAN, "1 second")
    field(INP,  "@lm500.proto getFILL($(P)FILL:STATUS) $(PORT)")
}
record(mbbi, "$(P)FILL:STATUS") {
    field(DESC, "default channel Fill status")
    field(ZRVL, "0")
    field(ONVL, "1")
    field(ZRST, "Off")
    field(ONST, "Timeout")
    field(DTYP, "Soft Channel")
}

record(bo, "$(P)FILL:CHAN1") {
    field(DESC, "Start Fil")
    field(DTYP, "stream")
    field(VAL,  "0")
    field(ONAM, "Starting Fill") 
    field(HIGH, "1")
    field(OUT,  "@lm500.proto FILLCHAN(1) $(PORT)")
}

record(ai, "$(P)FILL:CHAN1:TIME") {
    field(DESC, "Channel 1 result Fill Time")
    field(DTYP, "stream")
    field(EGU, "min")
    field(SCAN, "1 second")
    field(INP,  "@lm500.proto getFILLCHAN(1, $(P)FILL:CHAN1:STATUS) $(PORT)")
}
record(mbbi, "$(P)FILL:CHAN1:STATUS") {
    field(DESC, "channel 2 result Fill status")
    field(ZRVL, "0")
    field(ONVL, "1")
    field(ZRST, "Off")
    field(ONST, "Timeout")
    field(DTYP, "Soft Channel")
}

record(bo, "$(P)FILL:CHAN2") {
    field(DESC, "Start Fil")
    field(DTYP, "stream")
    field(VAL,  "0")
    field(ONAM, "Starting Fill") 
    field(HIGH, "1")
    field(OUT,  "@lm500.proto FILLCHAN(2) $(PORT)")
}

record(ai, "$(P)FILL:CHAN2:TIME") {
    field(DESC, "Channel 2 result Fill time")
    field(DTYP, "stream")
    field(EGU, "min")
    field(SCAN, "1 second")
    field(INP,  "@lm500.proto getFILLCHAN(2, $(P)FILL:CHAN2:STATUS) $(PORT)")
}
record(mbbi, "$(P)FILL:CHAN2:STATUS") {
    field(DESC, "channel 1 result Fill Status")
    field(ZRVL, "0")
    field(ONVL, "1")
    field(ZRST, "Off")
    field(ONST, "Timeout")
    field(DTYP, "Soft Channel")
}

record(ai, "$(P)HIGH:RB") {
    field(DESC, "High Threshold")
    field(DTYP, "stream")
    field(SCAN, "1 second")
    field(INP,  "@lm500.proto getHIGH() $(PORT)")
}

record(ao, "$(P)HIGH:SP") {
    field(DESC, "Set High Threshold")
    field(DTYP, "stream")
    field(OUT, "@lm500.proto setHIGH $(PORT)")
}

record(ai, "$(P)LOW:RB") {
    field(DESC, "Low Threshold")
    field(DTYP, "stream")
    field(SCAN, "1 second")
    field(INP,  "@lm500.proto getLOW() $(PORT)")
}

record(ao, "$(P)LOW:SP") {
    field(DESC, "Set Low Threshold")
    field(DTYP, "stream")
    field(OUT, "@lm500.proto setLow $(PORT)")
}

record(stringin, "$(P)INTRVL:RB") {
    field(DESC, "Interval")
    field(DTYP, "stream")
    field(SCAN, "1 second")
    field(INP,  "@lm500.proto getINERTVAL() $(PORT)")
}

record(scalcout, "$(P)INTRVL:SP") {
    field(DESC, "Interval Setpoint")
    field(DTYP, "stream")
    field(CALC, "$P('%02i',a)+':'+$P('%02i',b)+':'+$P('%02i',c)")
    field(INPA, "$(P)INTRVL:HOUR:SP CP MS")
    field(INPB, "$(P)INTRVL:MIN:SP CP MS")
    field(INPC,  "$(P)INTRVL:SEC:SP CP MS")
    field(OUT, "@lm500.proto setINTVL $(PORT)")
}

record(ao, "$(P)INTRVL:HOUR:SP") {
    field(DESC, "Set Interval Hour")
    field(DTYP, "Soft Channel")
    field(DRVH, "99")
    field(DRVL, "0")
}

record(ao, "$(P)INTRVL:MIN:SP") {
    field(DESC, "Set Interval Minute")
    field(DTYP, "Soft Channel")
    field(DRVH, "60")
    field(DRVL, "0")
}

record(ao, "$(P)INTRVL:SEC:SP") {
    field(DESC, "Set Interval Second")
    field(DTYP, "Soft Channel")
    field(DRVH, "60")
    field(DRVL, "0")
}

record(bo, "$(P)MEAS") {
    field(DESC, "Start Measurement")
    field(DTYP, "stream")
    field(VAL,  "0")
    field(ONAM, "Start Measurement") 
    field(HIGH, "1")
    field(OUT,  "@lm500.proto MEAS $(PORT)")
}

record(ai, "$(P)MEAS:RB") {
    field(DESC, "Default Channel's Measurement")
    field(DTYP, "stream")
    field(SCAN, "1 second")
    field(INP,  "@lm500.proto getMEASURE() $(PORT)")
}

record(bo, "$(P)MEAS:CHAN1") {
    field(DESC, "Start Measurement in Channel 1")
    field(DTYP, "stream")
    field(VAL,  "0")
    field(ONAM, "Start Measurement") 
    field(HIGH, "1")
    field(OUT,  "@lm500.proto MEASCHAN(1) $(PORT)")
}

record(ai, "$(P)MEAS:CHAN1:RB") {
    field(DESC, "Channel 1's Measurement")
    field(DTYP, "stream")
    field(SCAN, "1 second")
    field(INP,  "@lm500.proto getMEASURECHAN(1) $(PORT)")
}

record(bo, "$(P)MEAS:CHAN2") {
    field(DESC, "Start Measurement in Channel 2")
    field(DTYP, "stream")
    field(VAL,  "0")
    field(ONAM, "Start Measurement") 
    field(HIGH, "1")
    field(OUT,  "@lm500.proto MEASCHAN(2) $(PORT)")
}

record(ai, "$(P)MEAS:CHAN2:RB") {
    field(DESC, "Channel 2's Measurement")
    field(DTYP, "stream")
    field(SCAN, "1 second")
    field(INP,  "@lm500.proto getMEASURECHAN(2) $(PORT)")
}

record(mbbi, "$(P)MODE:RB") {
    field(DESC, "Mode")
    field(DTYP, "stream")
    field(ZRST, "Disabled")
    field(ONST, "Sample/Hold")
    field(TWST, "Continuous")
    field(SCAN, "1 second")
    field(INP,  "@lm500.proto getMODE() $(PORT)")
}

record(mbbo, "$(P)MODE:SP:RAW") {
    field(DESC, "Mode Setpoint")
    field(DTYP, "stream")
    field(ZRST, "0")
    field(ONST, "S")
    field(TWST, "C")
    field(OUT,  "@lm500.proto setMODE($(P)MODE:SP) $(PORT)")
}

record(mbbo, "$(P)MODE:SP") {
    field(DESC, "Mode Setpoint")
    field(DTYP, "soft channel")
    field(ZRST, "Disabled")
    field(ONST, "Sample/Hold")
    field(TWST, "Continuous")
    field(OUT,  "$(P)MODE:SP:RAW PP")
}

record(ai, "$(P)LENGTH:RB") {
    field(DESC, "Sensor Length")
    field(DTYP, "stream")
    field(SCAN, "1 second")
    field(INP,  "@lm500.proto getLENGTH() $(PORT)")
}

record(mbbiDirect, "$(P)STATUS:BIT:0") {
    field(DESC, "Channel 1 detailed status")
    field(DTYP, "stream")
    field(SCAN, "1 second")
    field(INP,  "@lm500.proto getSTATUS($(P)STATUS:BIT:1, $(P)MENU:MODE) $(PORT)")
    # 0 Read in progress
    # 1 Refill active
    # 2 Refill timeout occurred
    # 3 Auto refil is inihibeted by low = 0.0 or timeout
    # 4 Alarm limit is exceeded
    # 5 Open sensor was detected (LHe channel only)
    # 6 Burnout condition was detected
}


record(mbbiDirect, "$(P)STATUS:BIT:1") {
    field(DESC, "Channel 2 detailed status")
    field(DTYP, "Soft Channel")
    # 0 Read in progress
    # 1 Refill active
    # 2 Refill timeout occurred
    # 3 Auto refil is inihibeted by low = 0.0 or timeout
    # 4 Alarm limit is exceeded
    # 5 Open sensor was detected (LHe channel only)
    # 6 Burnout condition was detected
}

record(bi, "$(P)CHAN1:READ") {
    field(DESC, "Channel 1 Read Status")
    field(DTYP, "Raw Soft Channel")
    field(ONAM, "Read in progress")
    field(INP,  "$(P)STATUS:BIT:0.B0 CP MS")
}

record(bi, "$(P)CHAN2:READ") {
    field(DESC, "Channel 2 Read Status")
    field(DTYP, "Raw Soft Channel")
    field(ONAM, "Read in progress")
    field(INP,  "$(P)STATUS:BIT:1.B0 CP MS")
}

record(bi, "$(P)CHAN1:REFILL") {
    field(DESC, "Channel 1 Refill Status")
    field(DTYP, "Raw Soft Channel")
    field(ONAM, "Refill active")
    field(INP,  "$(P)STATUS:BIT:0.B1 CP MS")
}

record(bi, "$(P)CHAN2:REFILL") {
    field(DESC, "Channel 2 Refill Status")
    field(DTYP, "Raw Soft Channel")
    field(ONAM, "Refill active")
    field(INP,  "$(P)STATUS:BIT:1.B1 CP MS")
}

record(bi, "$(P)CHAN1:REFILL:TIMEOUT") {
    field(DESC, "Channel 1 Refill Timeout")
    field(DTYP, "Raw Soft Channel")
    field(ONAM, "Refill timeout occured")
    field(INP,  "$(P)STATUS:BIT:0.B2 CP MS")
}

record(bi, "$(P)CHAN2:REFILL:TIMEOUT") {
    field(DESC, "Channel 2 Refill Timeout")
    field(DTYP, "Raw Soft Channel")
    field(ONAM, "Refill timeout occured")
    field(INP,  "$(P)STATUS:BIT:1.B2 CP MS")
}

record(bi, "$(P)CHAN1:REFILL:INHIBITED") {
    field(DESC, "Channel 1 Refill Inhibited")
    field(DTYP, "Raw Soft Channel")
    field(ONAM, "Auto refil is inihibeted")
    field(INP,  "$(P)STATUS:BIT:0.B3 CP MS")
}

record(bi, "$(P)CHAN2:REFILL:INHIBITED") {
    field(DESC, "Channel 2 Refill Inhibited")
    field(DTYP, "Raw Soft Channel")
    field(ONAM, "Auto refil is inihibeted")
    field(INP,  "$(P)STATUS:BIT:1.B3 CP MS")
}

record(bi, "$(P)CHAN1:ALARM:STATUS") {
    field(DESC, "Channel 1 Alarm Status")
    field(DTYP, "Raw Soft Channel")
    field(ONAM, "Alarm Limit Exceeded")
    field(INP,  "$(P)STATUS:BIT:0.B4 CP MS")
}

record(bi, "$(P)CHAN2:ALARM:STATUS") {
    field(DESC, "Channel 2 Alarm Status")
    field(DTYP, "Raw Soft Channel")
    field(ONAM, "Alarm Limit Exceeded")
    field(INP,  "$(P)STATUS:BIT:1.B4 CP MS")
}

record(bi, "$(P)CHAN1:SENSOR:STATUS") {
    field(DESC, "Channel 1 Sensor Status")
    field(DTYP, "Raw Soft Channel")
    field(ONAM, "Open Sensor")
    field(INP,  "$(P)STATUS:BIT:0.B5 CP MS")
}

record(bi, "$(P)CHAN2:SENSOR:STATUS") {
    field(DESC, "Channel 2 Sensor Status")
    field(DTYP, "Raw Soft Channel")
    field(ONAM, "Open Sensor")
    field(INP,  "$(P)STATUS:BIT:1.B5 CP MS")
}

record(bi, "$(P)CHAN1:BURNOUT") {
    field(DESC, "Channel 1 Burnout Status")
    field(DTYP, "Raw Soft Channel")
    field(ONAM, "Burnout detected")
    field(INP,  "$(P)STATUS:BIT:0.B6 CP MS")
}

record(bi, "$(P)CHAN2:BURNOUT") {
    field(DESC, "Channel 2 Burnout Status")
    field(DTYP, "Raw Soft Channel")
    field(ONAM, "Burnout detected")
    field(INP,  "$(P)STATUS:BIT:1.B6 CP MS")
}

record(bi, "$(P)MENU:MODE") {
    field(DESC, "Menu Mode")
    field(DTYP, "stream")
    field(ONAM, "Menu Mode")
    field(ZNAM, "Operate Mode")
}

record(mbbi, "$(P)UNITS:RB") {
    field(DESC, "Units")
    field(ZRST, "CM")
    field(ONST, "IN")
    field(TWST, "%")
    field(DTYP, "stream")
    field(SCAN, "1 second")
    field(INP,  "@lm500.proto getUNITS() $(PORT)")
}

record(mbbo, "$(P)UNITS:SP") {
    field(DESC, "Set Units")
    field(DTYP, "stream")
    field(ZRST, "CM")
    field(ONST, "IN")
    field(TWST, "%")
    field(OUT,  "@lm500.proto setUNITS $(PORT)")
}

record(bo, "$(P)SIM")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
    field(ZNAM, "NO")
    field(ONAM, "YES")
    field(VAL, "$(RECSIM=0)")
    field(PINI, "YES")
}

record(bo, "$(P)DISABLE")
{
    field(DESC, "Disable comms")
    field(PINI, "YES")
    field(VAL, "$(DISABLE=0)")
    field(OMSL, "supervisory")
    field(ZNAM, "COMMS ENABLED")
    field(ONAM, "COMMS DISABLED")
}
